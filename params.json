{"name":"Yxnsthreadlession","tagline":"使用NSThread写的一个多线程，包含了NSThread的所有常用方法，可以用来详细学习NSThread","body":"#YXNSThreadLession\r\n##通过使用NSThread类来讲解iOS中的多线程，创建了12个线程，来下载12张图片，而且把最后一个线程的优先级设置成最高，其他线程在最后一个线程执行完毕之后在执行\r\n##ViewController.m \r\n###1.点击按钮下载的方法来开始执行\r\n    - (IBAction)downloadImgBtnClicked:(UIButton *)sender {\r\n    \tNSMutableArray *threads = [NSMutableArray array];\r\n    \tfor (int i=0; i<12; i++) {\r\n        \t//创建12个线程，每个线程去下载\r\n        \tNSThread *thread=[[NSThread alloc]initWithTarget:self selector:@selector(loadImage:) object:[NSNumber numberWithInt:i]];\r\n        \tthread.name=[NSString stringWithFormat:@\"myThread%i\",i];//设置线程名称\r\n        \tif (i == 11) {\r\n            \t[thread setThreadPriority:1];\r\n        \t}\r\n        \telse {\r\n            \t[thread setThreadPriority:0.1];\r\n        \t}\r\n        \t[threads addObject:thread];\r\n    \t}\r\n    \tfor (int i=0; i<12; i++) {\r\n        \tNSThread *thread = [threads objectAtIndex:i];\r\n        \t[thread start];\r\n    \t}\r\n    }\r\n\r\n###2.下载图片，当下载完成之后，去主线程中刷新UI，来显示图片\r\n    \r\n    -(void)loadImage:(NSNumber *)index{\r\n    \tif (index.intValue != 11) {\r\n        \t[NSThread sleepForTimeInterval:3];\r\n    \t}\r\n    \tNSData *data = [self requestData];\r\n    \tYXImageData *yxData = [[YXImageData alloc] init];\r\n    \tyxData.index = index.intValue;\r\n    \tyxData.imageData = data;\r\n    \t[self performSelectorOnMainThread:@selector(updateImage:) withObject:yxData waitUntilDone:YES];\r\n    }\r\n   \r\n###3.使用url请求图片，把请求回来的数据保存在NSData中\r\n    - (NSData *)requestData\r\n\t{\r\n    \tNSURL *dataUrl = [NSURL URLWithString:ImageURL];\r\n    \tNSData *data = [NSData dataWithContentsOfURL:dataUrl];\r\n    \treturn data;\r\n\t}\r\n\t\r\n###4.显示图片    \r\n    - (void)updateImage:(YXImageData *)imageData\r\n\t{\r\n    \tUIImageView *tempData = self.imageArray[imageData.index];\r\n    \ttempData.image = [UIImage imageWithData:imageData.imageData];\r\n\t}    \r\n\r\n\r\n##YXImageData 包含了一个index和NSData\r\n    @interface YXImageData : NSObject\r\n    @property (nonatomic, assign) int index;\r\n    @property (nonatomic, retain) NSData *imageData;\r\n    @end\r\n\r\n\r\n##相关论坛帖子在：[http://blog.csdn.net/guoyaxin002/article/details/47989161](http://blog.csdn.net/guoyaxin002/article/details/47989161)\r\n##相关技术讨论群在：qq群号：486365320\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}