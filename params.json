{"name":"Yxnsthreadlession","tagline":"使用NSThread写的一个多线程，包含了NSThread的所有常用方法，可以用来详细学习NSThread","body":"#YXNSThreadLession\r\n##通过使用NSThread类来讲解iOS中的多线程，创建了12个线程，来下载12张图片，而且把最后一个线程的优先级设置成最高，其他线程在最后一个线程执行完毕之后在执行\r\n##主要方法\r\n###1.点击按钮下载的方法来开始执行\r\n- (IBAction)downloadImgBtnClicked:(UIButton *)sender {\r\n    NSMutableArray *threads = [NSMutableArray array];\r\n    for (int i=0; i<12; i++) {\r\n        //创建12个线程，每个线程去下载\r\n        NSThread *thread=[[NSThread alloc]initWithTarget:self selector:@selector(loadImage:) object:[NSNumber numberWithInt:i]];\r\n        thread.name=[NSString stringWithFormat:@\"myThread%i\",i];//设置线程名称\r\n        if (i == 11) {\r\n            [thread setThreadPriority:1];\r\n        }\r\n        else {\r\n            [thread setThreadPriority:0.1];\r\n        }\r\n        [threads addObject:thread];\r\n    }\r\n    for (int i=0; i<12; i++) {\r\n        NSThread *thread = [threads objectAtIndex:i];\r\n        [thread start];\r\n    }\r\n}\r\n\r\n###2.去下载图片的方法，当下载完成之后，去主线程中刷新UI，来显示图片\r\n\r\n“`\r\n-(void)loadImage:(NSNumber *)index\r\n{\r\n    if (index.intValue != 11) {\r\n        [NSThread sleepForTimeInterval:3];\r\n    }\r\n    NSData *data = [self requestData];\r\n    YXImageData *yxData = [[YXImageData alloc] init];\r\n    yxData.index = index.intValue;\r\n    yxData.imageData = data;\r\n//    self.showImage.image = [UIImage imageWithData:data];\r\n    [self performSelectorOnMainThread:@selector(updateImage:) withObject:yxData waitUntilDone:YES];\r\n}\r\n“`\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}